/* ========== Smart FAQ Center — Brand × Modern UI (WASEDA SG) ========== */
:root{
  --bg:#0b1220; --surface:#121a2b; --text:#eaf1ff; --muted:#a9b8d8;
  --brand-blue:#1e66ff; --brand-green:#00c39a; --brand-orange:#ffa800;
  --card:#0f1524; --border:#1f2a44; --shadow:0 10px 25px rgba(14,22,48,.5);
}
@media (prefers-color-scheme: light)
  :roo
    --bg:#f6f8fc; --surface:#ffffff; --text:#07122e; --muted:#51607c;
    --brand-blue:#1860ff; --brand-green:#00b68f; --brand-orange:#ff9900;
    --card:#ffffff; --border:#e6e9f3; --shadow:0 10px 25px rgba(9,24,61,.08);
  }
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family:ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Noto Sans JP",Arial;
  color:var(--text);
  background:
    radial-gradient(1000px 600px at 10% -10%, rgba(107,169,255,.15), transparent 60%),
    radial-gradient(1000px 600px at 110% 10%, rgba(123,255,199,.12), transparent 60%),
    var(--bg);
}
.container{max-width:1100px;margin:0 auto;padding:16px 20px}

/* ---------- Header（明るい固定トーン & 高コントラスト） ---------- */
.header{
  position:sticky; top:0; z-index:50;
  background:linear-gradient(180deg,#f8fbff 0%,#eef6ff 100%);
  border-bottom:1px solid rgba(0,0,0,.08);
  box-shadow:0 2px 10px rgba(0,0,0,.06);
  color:#0f1d34;
  backdrop-filter:saturate(140%) blur(8px);
}
.bar{display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap}
.brand{display:flex;align-items:center;gap:12px;min-width:260px}
.logo{width:34px;height:34px;border-radius:10px;background:linear-gradient(135deg,var(--brand-blue), var(--brand-green));box-shadow:var(--shadow)}
.title{font-weight:800;letter-spacing:.2px}
.site-note{color:#0f1d34;background:rgba(0,0,0,.05);
  border:1px solid rgba(0,0,0,.12); border-radius:999px; padding:4px 10px; font-size:12px; backdrop-filter: blur(6px);}
.site-footer{margin:24px auto;padding:12px 20px;max-width:1100px;color:var(--muted);font-size:12px}
.site-footer a{color:var(--muted);text-decoration:underline}

/* ---------- Header Nav（入口/キーワード/AI/ホーム） ---------- */
.foot-actions{
  display:flex;
  gap:10px;
  align-items:center;
  flex-wrap:wrap;
}
.foot-actions .btn{ white-space:nowrap; border-radius:999px; }

/* ヘッダー上のゴーストボタン：見やすく＋強いホバー */
.header .btn.ghost{
  background:rgba(0,0,0,.06);
  border-color:rgba(0,0,0,.18);
  color:#0f1d34;
}
.header .foot-actions .btn.ghost{
  transition:
    transform .15s ease,
    box-shadow .2s ease,
    background-color .15s ease,
    border-color .15s ease,
    outline-color .15s ease;
}
.header .foot-actions .btn.ghost:hover,
.header .foot-actions .btn.ghost:focus-visible{
  background:rgba(0,0,0,.12);
  border-color:rgba(0,0,0,.25);
  box-shadow:0 3px 14px rgba(0,0,0,.16);
  transform:translateY(-1px) scale(1.02);
  outline:2px solid rgba(30,102,255,.45);
  outline-offset:2px;
}
.header .foot-actions .btn.ghost:active{
  transform:translateY(0) scale(.98);
  box-shadow:0 1px 6px rgba(0,0,0,.12) inset;
}
/* “今いるページ”を常時強調（aria-current="page" or .is-active） */
.header .foot-actions .btn.ghost.is-active,
.header .foot-actions .btn.ghost[aria-current="page"]{
  background:linear-gradient(135deg, var(--brand-blue), var(--brand-green));
  color:#081422;
  border-color:transparent;
  box-shadow:0 6px 18px rgba(30,102,255,.28);
}

/* スマホ：ブランドを上段、ナビは横スクロールのチップ列に */
@media (max-width: 720px){
  .header .bar{ align-items:flex-start; gap:8px; }
  .brand{ min-width:0; }
  .site-note{
    max-width:65vw; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
  }
  .foot-actions{
    order:2; width:100%; flex-wrap:nowrap;
    overflow-x:auto; -webkit-overflow-scrolling:touch;
    padding:4px 0 6px; scrollbar-width:none;
  }
  .foot-actions::-webkit-scrollbar{ display:none; }
  .foot-actions .btn{
    flex:0 0 auto; font-size:14px; padding:8px 12px;
  }
}

/* ---------- 薄めの注釈系 ---------- */
.subtle{ color:var(--muted); font-size:14px; }
.stepnote{ color:var(--muted); font-size:13px; margin-top:4px; }
.note{
  margin:12px 0;
  padding:10px 12px;
  border-radius:12px;
  background:rgba(30,102,255,.12);
  border:1px solid rgba(30,102,255,.25);
  color:var(--text);
  font-size:14px;
  line-height:1.5;
}

/* ---------- Controls / pills / buttons（共通） ---------- */
.tools{display:flex;gap:10px;align-items:center;margin:14px 0 6px;flex-wrap:wrap}
.search{flex:1;display:flex;align-items:center;gap:8px;border:1px solid var(--border);background:var(--surface);border-radius:12px;padding:8px 10px;min-width:220px}
.search input{flex:1;border:none;outline:none;font-size:15px;background:transparent;color:var(--text)}
.pill{--h:210;border:1px solid hsla(var(--h),80%,50%,.35);padding:7px 10px;border-radius:999px;cursor:pointer;background:var(--surface);font-size:13px;transition:.2s}
.pill:hover{border-color:hsla(var(--h),80%,55%,.7);box-shadow:0 0 0 2px hsla(var(--h),80%,55%,.15) inset}
.pill.active{border-color:hsla(var(--h),80%,55%,.9);box-shadow:0 0 0 2px hsla(var(--h),80%,55%,.25) inset}
.pill-wrap{display:flex;gap:8px;flex-wrap:wrap}

.btn{
  appearance:none;border:1px solid var(--border);background:var(--surface);color:var(--text);
  padding:10px 14px;border-radius:12px;cursor:pointer;font-weight:700;transition:.2s;
}
.btn:hover{transform:translateY(-1px)}
.btn.primary{background:linear-gradient(135deg,var(--brand-blue), var(--brand-green)); color:#081422; border:none}
/* 非ヘッダー領域でのゴーストボタン（軽く浮かす） */
.btn.ghost{ background:rgba(255,255,255,.06); }
@media (prefers-color-scheme: dark){
  .btn.ghost{ background:rgba(255,255,255,.04); }
}
.btn.tiny{font-size:12px;padding:6px 10px;border-radius:10px}
.btn.tiny.ok{border:none;background:linear-gradient(135deg,var(--brand-blue), var(--brand-green)); color:#081422}
.btn.tiny.ghost{background:transparent;border:1px solid var(--border)}
.btn.tiny.ok:hover{filter:brightness(1.06)}
.btn.tiny.ghost:hover{background:rgba(255,168,0,.12);border-color:rgba(255,168,0,.45)}

/* ---------- Landing ---------- */
.landing{padding:24px}
.choices{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:14px}
.choice{border:1px solid var(--border); background:var(--card); border-radius:16px; padding:16px;
  display:flex; gap:12px; align-items:flex-start; cursor:pointer; transition:.2s transform,.2s box-shadow,.2s border-color, .2s opacity;}
.choice .ico{width:40px;height:40px;border-radius:10px;background:linear-gradient(135deg,var(--brand-blue), var(--brand-green));flex:0 0 auto}
.choice h3{margin:0 0 6px;font-size:16px}
.choice p{margin:0;color:var(--muted);font-size:13px}
.choice:hover{transform:translateY(-3px);box-shadow:var(--shadow);border-color:rgba(255,168,0,.6)}
.choice.selected{transform:translateY(-3px) scale(1.03); border-color:rgba(30,102,255,.8); box-shadow:0 6px 20px rgba(30,102,255,.25)}
.choice.dim{opacity:.55}

/* ---------- Category group / card (colored) ---------- */
.group{margin:20px 0; --cat-h:220}
.cat-head{width:100%; text-align:left; background:linear-gradient(0deg, hsla(var(--cat-h),85%,60%,.06), transparent);
  color:var(--text); border:1px solid var(--border); border-left:6px solid hsl(var(--cat-h),85%,54%);
  border-radius:14px; padding:14px 16px; display:flex; align-items:center; gap:10px; cursor:pointer; transition:.2s;}
.cat-head:hover{border-color:rgba(255,168,0,.5); box-shadow:0 0 0 2px rgba(255,168,0,.2) inset}
.cat-head .cat-title{font-weight:800}
.badge{margin-left:auto;border-radius:999px;padding:2px 8px;font-size:12px;background:hsla(var(--cat-h),85%,60%,.12);color:hsl(var(--cat-h),85%,60%);border:1px solid hsla(var(--cat-h),85%,60%,.35)}
.group .cat-body{max-height:0; overflow:hidden; transition:max-height .35s ease, padding .25s ease; padding:0 2px}
.group.open .cat-body{padding:8px 2px 2px; max-height:9999px}

.card{border:1px solid var(--border);border-left:4px solid hsl(var(--cat-h),85%,54%);background:var(--card);border-radius:16px;overflow:hidden;box-shadow:var(--shadow);margin:10px 0;transition:.15s}
.card:hover{transform:translateY(-1px)}
.q{display:flex;align-items:center;justify-content:space-between;gap:10px;padding:14px 16px;cursor:pointer;background:linear-gradient(0deg, hsla(var(--cat-h),85%,60%,.03), transparent)}
.q h3{margin:0;font-size:16px;font-weight:700}
.chev{width:14px;height:14px;transition:.25s transform;opacity:.85}
.a{max-height:0;overflow:hidden;transition:max-height .3s ease, padding .25s ease; padding:0 16px;border-top:1px solid transparent;background:transparent}
.a.open{padding:12px 16px 16px;border-top:1px solid var(--border);background:hsla(var(--cat-h),85%,58%,.05)}
.a p{margin:0}
.helpful{margin-top:10px; display:flex; gap:8px; flex-wrap:wrap}

/* ---------- Alerts ---------- */
.alert{color:#1f283a;background:#ddf4ff;border:1px solid #b5e2ff;padding:12px;border-radius:12px}
@media (prefers-color-scheme: dark){ .alert{color:#cde8ff;background:rgba(35,115,223,.15);border-color:#1e3a8a} }

/* ---------- Scrollbar / focus ---------- */
*{scrollbar-width:thin; scrollbar-color: rgba(30,102,255,.6) transparent;}
::-webkit-scrollbar{height:10px;width:10px}
::-webkit-scrollbar-thumb{background:linear-gradient(180deg, var(--brand-blue), var(--brand-green)); border-radius:10px}
::-webkit-scrollbar-track{background:transparent}
:focus-visible{outline:2px solid rgba(255,168,0,.85); outline-offset:2px; border-radius:10px}

/* ---------- AI 検索UI: チャット/入力レイアウト ---------- */
.chat{
  border:1px solid var(--border);
  background:var(--surface);
  border-radius:16px;
  padding:14px;
  min-height:200px;
  max-height:50vh;
  overflow:auto;
}
.bubble{
  display:inline-block;
  max-width:min(85%, 720px);
  padding:10px 12px;
  border-radius:14px;
  margin:6px 0;
}
.bubble.bot{
  background:rgba(30,102,255,.08);
  border:1px solid rgba(30,102,255,.25);
}
.bubble.me{
  background:rgba(255,168,0,.14);
  border:1px solid rgba(255,168,0,.35);
  margin-left:auto;
}
.composer{
  display:flex; align-items:flex-end; gap:10px; margin-top:12px;
}
.composer textarea{
  flex:1; min-height:96px; max-height:40vh; resize:vertical;
  padding:10px 12px; border:1px solid var(--border); border-radius:12px;
  background:var(--surface); color:var(--text); line-height:1.5;
}
.composer .btn{
  height:44px; padding:0 18px; white-space:nowrap;
}

.ref-title{font-weight:700;margin-bottom:6px;}
.refs{margin:6px 0 0;padding-left:18px;font-size:13px;line-height:1.5;color:var(--text);}
.refs li{margin-bottom:6px;}
.refs a{color:var(--brand-blue);}
.ref-desc{color:var(--muted);font-size:12px;margin-top:2px;}

/* ---------- Responsive（補足） ---------- */
@media (max-width:720px){
  .bar{gap:10px}
  .title{font-size:16px}
  .tools{gap:8px}
  .search{flex:1 1 100%}
  .pill-wrap{flex:1 1 100%}
  .q h3{font-size:15px}
  .composer{ flex-direction:column; align-items:stretch; }
  .composer .btn{ width:100%; }
}
/* ====== AI キャラクター&吹き出し ====== */
.ai-char-wrap{
  display:flex; gap:14px; align-items:flex-end; margin:14px 0 10px;
}
.ai-char{
  flex:0 0 auto;
  width:220px; height:220px;
  display:flex; align-items:flex-end; justify-content:center;
}
.ai-char img{
  width:220px; height:220px; object-fit:contain; image-rendering:auto;
  filter: drop-shadow(0 8px 18px rgba(0,0,0,.25));
}
.ai-balloon{
  position:relative; flex:1;
  background: rgba(255,255,255,.85);
  color:#0a1530;
  border:1px solid rgba(0,0,0,.1);
  border-radius:16px;
  padding:12px 14px 14px;
  min-height:64px;
  box-shadow: var(--shadow);
}
@media (prefers-color-scheme: dark){
  .ai-balloon{ background: rgba(20,30,56,.85); color:#eaf1ff; border-color: rgba(255,255,255,.12); }
}
.ai-balloon::after{
  content:""; position:absolute; left:-14px; bottom:16px;
  width:0; height:0; border:8px solid transparent;
  border-right-color: currentColor; opacity:.12; filter:blur(2px);
}
.ai-balloon::before{
  content:""; position:absolute; left:-10px; bottom:18px;
  width:0; height:0; border:8px solid transparent;
  border-right-color: rgba(255,255,255,.85);
}
@media (prefers-color-scheme: dark){
  .ai-balloon::before{ border-right-color: rgba(20,30,56,.85); }
}
.ai-balloon-inner{ white-space:pre-wrap; line-height:1.6; }

/* “検索中”インジケーター */
.ai-indicator{
  margin-top:8px; display:flex; align-items:center; gap:8px;
  font-size:13px; color:var(--muted);
}
.ai-indicator .dot{
  width:6px; height:6px; border-radius:50%; background: var(--brand-blue);
  display:inline-block; animation: dotJump 1.1s infinite ease-in-out;
}
.ai-indicator .dot:nth-child(2){ animation-delay:.15s }
.ai-indicator .dot:nth-child(3){ animation-delay:.3s }
@keyframes dotJump{
  0%,80%,100%{ transform:translateY(0) }
  40%{ transform:translateY(-6px) }
}

/* チャットのバブルを漫画風に少し丸く */
.bubble.bot{
  border-radius:18px 18px 18px 6px;
}
.bubble.me{
  border-radius:18px 18px 6px 18px;
}

/* スマホ並び替え */
@media (max-width:720px){
  .ai-char-wrap{ align-items:center; }
  .ai-char{ width:160px; height:160px; }
  .ai-char img{ width:160px; height:160px; }
}

/* ====== AI フローティング・キャラクター（右下固定） ====== */
.ai-floater{
  position: fixed;
  right: 20px;
  bottom: 20px;
  z-index: 60;
  display: flex;
  align-items: flex-end;
  gap: 12px;
}

/* キャラ本体は“白背景のカード”で統一（②） */
.ai-card{
  background:#ffffff;              /* ダークでも白で固定 */
  border:1px solid rgba(0,0,0,.08);
  border-radius:20px;
  box-shadow: 0 16px 40px rgba(0,0,0,.22);
  padding: 8px;
}
.ai-card img{
  width:300px; height:300px; object-fit:contain;
  display:block;
}

/* 漫画風ふきだし（③） */
.ai-balloon{
  position: relative;
  max-width: 32vw;
  background:#ffffff;
  color:#0b1530;
  border:3px solid #1e66ff;       /* 青い太めのアウトラインでポップ */
  border-radius:18px;
  padding:12px 14px 14px;
  box-shadow: 0 10px 30px rgba(30,102,255,.18);
}
.ai-balloon::after{
  content:"";
  position:absolute;
  right: calc(-16px - 3px);
  bottom: 28px;
  border-width: 10px 0 10px 16px;
  border-style: solid;
  border-color: transparent transparent transparent #1e66ff; /* 枠線色 */
}
.ai-balloon::before{
  content:"";
  position:absolute;
  right: -16px;
  bottom: 28px;
  border-width: 10px 0 10px 16px;
  border-style: solid;
  border-color: transparent transparent transparent #ffffff;  /* 吹き出し色 */
}
.ai-balloon-inner{ white-space: pre-wrap; line-height:1.65; font-weight:600; }

/* 検索中インジケータ（➀ 検索時のみJSで表示） */
.ai-indicator{
  margin-top:8px; display:flex; align-items:center; gap:8px;
  font-size:13px; color:#4d6bdc;
}
.ai-indicator .dot{
  width:6px; height:6px; border-radius:50%; background:#1e66ff;
  display:inline-block; animation: dotJump 1.1s infinite ease-in-out;
}
.ai-indicator .dot:nth-child(2){ animation-delay:.15s }
.ai-indicator .dot:nth-child(3){ animation-delay:.3s }
@keyframes dotJump{
  0%,80%,100%{ transform:translateY(0) }
  40%{ transform:translateY(-6px) }
}

/* スマホ対応（⑥） */
@media (max-width: 820px){
  .ai-floater{ right: 12px; bottom: 12px; gap:8px; }
  .ai-card img{ width:210px; height:210px; }
  .ai-balloon{ max-width: 62vw; }
}

/* 会話バブル：改行保持＆行間アップ（④） */
.bubble{ white-space: pre-wrap; line-height:1.7; }
.bubble.bot{
  background:linear-gradient(0deg, rgba(30,102,255,.08), rgba(30,102,255,.04));
  border:1px solid rgba(30,102,255,.28);
  border-radius:18px 18px 18px 6px;
}
.bubble.me{
  background:linear-gradient(0deg, rgba(255,168,0,.18), rgba(255,168,0,.10));
  border:1px solid rgba(255,168,0,.35);
  border-radius:18px 18px 6px 18px;
}

/* ⑦ ややポップに（軽いアクセント） */
.chat{
  background:
    radial-gradient(600px 280px at 95% 105%, rgba(30,102,255,.10), transparent 60%),
    radial-gradient(480px 240px at -10% 100%, rgba(255,168,0,.12), transparent 60%),
    var(--surface);
}
.btn{
  box-shadow: 0 4px 14px rgba(30,102,255,.18);
}
.btn:hover{
  transform: translateY(-2px);
  box-shadow: 0 8px 24px rgba(30,102,255,.25);
}
/* ========== Smart FAQ Center — Brand × Modern UI (WASEDA SG) ========== */
:root{
  --bg:#0b1220; --surface:#121a2b; --text:#eaf1ff; --muted:#a9b8d8;
  --brand-blue:#1e66ff; --brand-green:#00c39a; --brand-orange:#ffa800;
  --card:#0f1524; --border:#1f2a44; --shadow:0 10px 25px rgba(14,22,48,.5);
}
@media (prefers-color-scheme: light){
  :root{
    --bg:#f6f8fc; --surface:#ffffff; --text:#07122e; --muted:#51607c;
    --brand-blue:#1860ff; --brand-green:#00b68f; --brand-orange:#ff9900;
    --card:#ffffff; --border:#e6e9f3; --shadow:0 10px 25px rgba(9,24,61,.08);
  }
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family:ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Noto Sans JP",Arial;
  color:var(--text);
  background:
    radial-gradient(1000px 600px at 10% -10%, rgba(107,169,255,.15), transparent 60%),
    radial-gradient(1000px 600px at 110% 10%, rgba(123,255,199,.12), transparent 60%),
    var(--bg);
}
.container{max-width:1100px;margin:0 auto;padding:16px 20px}

/* ---------- Header ---------- */
.header{
  position:sticky; top:0; z-index:50;
  background:linear-gradient(180deg,#f8fbff 0%,#eef6ff 100%);
  border-bottom:1px solid rgba(0,0,0,.08);
  box-shadow:0 2px 10px rgba(0,0,0,.06);
  color:#0f1d34; backdrop-filter:saturate(140%) blur(8px);
}
.bar{display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap}
.brand{display:flex;align-items:center;gap:12px;min-width:260px}
.logo{width:34px;height:34px;border-radius:10px;background:linear-gradient(135deg,var(--brand-blue), var(--brand-green));box-shadow:var(--shadow)}
.title{font-weight:800;letter-spacing:.2px}
.subtle{ color:var(--muted); font-size:14px; }
.site-footer{margin:24px auto;padding:12px 20px;max-width:1100px;color:var(--muted);font-size:12px}
.site-footer a{color:var(--muted);text-decoration:underline}

/* Header nav buttons */
.foot-actions{ display:flex; gap:10px; align-items:center; flex-wrap:wrap; }
.header .btn.ghost{ background:rgba(0,0,0,.06); border-color:rgba(0,0,0,.18); color:#0f1d34;}
.header .foot-actions .btn.ghost{
  transition: transform .15s ease, box-shadow .2s ease, background-color .15s ease, border-color .15s ease, outline-color .15s ease;
}
.header .foot-actions .btn.ghost:hover,
.header .foot-actions .btn.ghost:focus-visible{
  background:rgba(0,0,0,.12); border-color:rgba(0,0,0,.25);
  box-shadow:0 3px 14px rgba(0,0,0,.16);
  transform:translateY(-1px) scale(1.02);
  outline:2px solid rgba(30,102,255,.45); outline-offset:2px;
}
.header .foot-actions .btn.ghost.is-active{ 
  background:linear-gradient(135deg, var(--brand-blue), var(--brand-green));
  color:#081422; border-color:transparent; box-shadow:0 6px 18px rgba(30,102,255,.28);
}

/* ---------- Controls / Buttons ---------- */
.btn{
  appearance:none;border:1px solid var(--border);background:var(--surface);color:var(--text);
  padding:10px 14px;border-radius:12px;cursor:pointer;font-weight:700;transition:.2s;
  box-shadow: 0 4px 14px rgba(30,102,255,.18);
}
.btn:hover{transform:translateY(-2px); box-shadow:0 8px 24px rgba(30,102,255,.25);}
.btn.primary{background:linear-gradient(135deg,var(--brand-blue), var(--brand-green)); color:#081422; border:none}
.btn.ghost{ background:rgba(255,255,255,.06); }

/* ---------- Chat Area ---------- */
.chat{
  border:1px solid var(--border);
  background:
    radial-gradient(600px 280px at 95% 105%, rgba(30,102,255,.10), transparent 60%),
    radial-gradient(480px 240px at -10% 100%, rgba(255,168,0,.12), transparent 60%),
    var(--surface);
  border-radius:16px;
  padding:14px; min-height:200px; max-height:50vh; overflow:auto;
}
.bubble{
  display:inline-block; max-width:min(85%, 720px);
  padding:10px 12px; border-radius:18px; margin:6px 0;
  white-space: pre-wrap; line-height:1.7;
}
.bubble.bot{
  background:linear-gradient(0deg, rgba(30,102,255,.08), rgba(30,102,255,.04));
  border:1px solid rgba(30,102,255,.28);
  border-radius:18px 18px 18px 6px;
}
.bubble.me{
  background:linear-gradient(0deg, rgba(255,168,0,.18), rgba(255,168,0,.10));
  border:1px solid rgba(255,168,0,.35);
  margin-left:auto; border-radius:18px 18px 6px 18px;
}
.ref-title{font-weight:700;margin-bottom:6px;}
.refs{margin:6px 0 0;padding-left:18px;font-size:13px;line-height:1.5;color:var(--text);}
.refs li{margin-bottom:6px;}
.refs a{color:var(--brand-blue);}
.ref-desc{color:var(--muted);font-size:12px;margin-top:2px;}

.composer{ display:flex; align-items:flex-end; gap:10px; margin-top:12px; }
.composer textarea{
  flex:1; min-height:96px; max-height:40vh; resize:vertical;
  padding:10px 12px; border:1px solid var(--border); border-radius:12px;
  background:var(--surface); color:var(--text); line-height:1.5;
}
.composer .btn{ height:44px; padding:0 18px; white-space:nowrap; }

/* ---------- Floating Character (右下) ---------- */
.ai-floater{
  position: fixed; right: 20px; bottom: 20px; z-index: 60;
  display: flex; align-items: flex-end; gap: 12px;
}
.ai-card{
  background:#ffffff; /* ② 白背景固定 */
  border:1px solid rgba(0,0,0,.08);
  border-radius:20px; box-shadow: 0 16px 40px rgba(0,0,0,.22);
  padding: 8px;
}
.ai-card img{ width:300px; height:300px; object-fit:contain; display:block; }

/* 吹きだし（漫画風） */
.ai-balloon{
  position: relative; max-width: 32vw;
  background:#ffffff; color:#0b1530;
  border:3px solid #1e66ff; border-radius:18px;
  padding:12px 14px 14px; box-shadow: 0 10px 30px rgba(30,102,255,.18);
}
.ai-balloon::after{
  content:""; position:absolute; right: calc(-16px - 3px); bottom: 28px;
  border-width: 10px 0 10px 16px; border-style:solid;
  border-color: transparent transparent transparent #1e66ff;
}
.ai-balloon::before{
  content:""; position:absolute; right: -16px; bottom: 28px;
  border-width: 10px 0 10px 16px; border-style:solid;
  border-color: transparent transparent transparent #ffffff;
}
.ai-balloon-inner{ white-space: pre-wrap; line-height:1.65; font-weight:600; }

/* 検索中インジケータ（hiddenで初期非表示） */
.ai-indicator{ margin-top:8px; display:flex; align-items:center; gap:8px; font-size:13px; color:#4d6bdc; }
.ai-indicator[hidden]{ display:none !important; }
.ai-indicator .dot{
  width:6px; height:6px; border-radius:50%; background:#1e66ff;
  display:inline-block; animation: dotJump 1.1s infinite ease-in-out;
}
.ai-indicator .dot:nth-child(2){ animation-delay:.15s }
.ai-indicator .dot:nth-child(3){ animation-delay:.3s }
@keyframes dotJump{ 0%,80%,100%{ transform:translateY(0) } 40%{ transform:translateY(-6px) } }

/* ---------- Responsive ---------- */
@media (max-width: 820px){
  .ai-floater{ right: 12px; bottom: 12px; gap:8px; }
  .ai-card img{ width:210px; height:210px; }
  .ai-balloon{ max-width: 62vw; }
  .foot-actions{ overflow-x:auto; -webkit-overflow-scrolling:touch; }
}

/* ---------- Focus / Scrollbar ---------- */
*{scrollbar-width:thin; scrollbar-color: rgba(30,102,255,.6) transparent;}
::-webkit-scrollbar{height:10px;width:10px}
::-webkit-scrollbar-thumb{background:linear-gradient(180deg, var(--brand-blue), var(--brand-green)); border-radius:10px}
::-webkit-scrollbar-track{background:transparent}
:focus-visible{outline:2px solid rgba(255,168,0,.85); outline-offset:2px; border-radius:10px}

/* ===== AIページ専用（ai.html）: ポップで明るいトーン ===== */
body.ai-page{
  --ai-sky:#f8fbff;
  --ai-accent-blue:#4d78ff;
  --ai-accent-pink:#ff7ac6;
  --ai-accent-yellow:#ffd66b;
  background:
    radial-gradient(800px 520px at 15% 0%, rgba(77,120,255,.18), transparent 70%),
    radial-gradient(820px 520px at 90% 10%, rgba(255,122,198,.15), transparent 70%),
    radial-gradient(900px 560px at 50% 100%, rgba(255,214,107,.18), transparent 75%),
    var(--ai-sky);
  color:#06102b;
}

body.ai-page .container{
  position:relative;
}

body.ai-page main.container{
  background:rgba(255,255,255,.78);
  border-radius:28px;
  box-shadow:0 24px 60px rgba(61,104,255,.16);
  padding:28px 32px;
  margin-top:28px;
}

@media (max-width:720px){
  body.ai-page main.container{ padding:22px 18px; border-radius:22px; }
}

body.ai-page .heading{
  font-size:26px;
  font-weight:800;
  color:#0d1b4a;
}

body.ai-page .note{
  background:linear-gradient(135deg, rgba(77,120,255,.18), rgba(255,122,198,.12));
  border:1px solid rgba(77,120,255,.28);
  color:#0d1b4a;
}

body.ai-page .chat{
  background:
    linear-gradient(135deg, rgba(77,120,255,.12), rgba(255,214,107,.10)),
    rgba(255,255,255,.85);
  border:2px solid rgba(77,120,255,.25);
  box-shadow:0 12px 38px rgba(77,120,255,.22);
}

body.ai-page .bubble.bot{
  background:rgba(77,120,255,.16);
  border-color:rgba(77,120,255,.42);
  color:#08153a;
}

body.ai-page .bubble.me{
  background:rgba(255,214,107,.26);
  border-color:rgba(255,214,107,.55);
  color:#523102;
}

body.ai-page .composer textarea{
  border:2px solid rgba(77,120,255,.25);
  border-radius:16px;
  background:rgba(255,255,255,.9);
  box-shadow:0 10px 28px rgba(77,120,255,.12);
  color:#0d1b4a;
}

body.ai-page .composer .btn{
  background:linear-gradient(135deg, #4d78ff, #ff7ac6);
  color:#fff;
  border:none;
  box-shadow:0 8px 26px rgba(255,122,198,.32);
}

body.ai-page .composer .btn:hover{
  box-shadow:0 14px 32px rgba(77,120,255,.35);
}

body.ai-page .ai-floater{
  align-items:center;
  gap:18px;
}

body.ai-page .ai-card{
  position:relative;
  width:280px;
  height:280px;
  border-radius:26px;
  border:none;
  background:linear-gradient(135deg, rgba(255,255,255,.85), rgba(77,120,255,.18));
  box-shadow:0 22px 60px rgba(30,70,150,.25);
  overflow:hidden;
  z-index:0;
}

body.ai-page .ai-card::after{
  content:"";
  position:absolute;
  inset:18px;
  border-radius:50%;
  background:radial-gradient(circle, rgba(255,255,255,.8) 0%, rgba(255,255,255,0) 70%);
  opacity:.85;
  filter:blur(2px);
  z-index:0;
}

body.ai-page .ai-card img{
  position:absolute;
  inset:0;
  margin:auto;
  width:260px;
  height:260px;
  object-fit:contain;
  filter:drop-shadow(0 18px 28px rgba(17,32,73,.28));
  z-index:1;
}

body.ai-page .ai-balloon{
  max-width:340px;
  background:rgba(255,255,255,.92);
  border:3px solid rgba(77,120,255,.8);
  color:#08153a;
  box-shadow:0 18px 42px rgba(77,120,255,.25);
}

body.ai-page .ai-balloon::before{ border-color: transparent transparent transparent rgba(255,255,255,.92); }
body.ai-page .ai-balloon::after{ border-color: transparent transparent transparent rgba(77,120,255,.8); }

body.ai-page .ai-balloon-inner{
  font-size:15px;
  line-height:1.75;
}

@media (max-width:820px){
  body.ai-page .ai-card{ width:220px; height:220px; }
  body.ai-page .ai-card img{ width:200px; height:200px; }
  body.ai-page .ai-balloon{ max-width:70vw; }
}
